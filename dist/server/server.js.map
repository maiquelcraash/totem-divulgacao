{"version":3,"sources":["../../server/server.js"],"names":["app","require","arquivo","path","properties","db","totens","getTotems","listen","process","env","PORT","SERVER_PORT","get","req","res","sendfile","all","next","header","console","log","connection","remoteAddress","write","post","body","id","totemID","situation","totem","totems","find","description_id","send","json"],"mappings":"AAAA;AACA,MAAMA,MAAMC,QAAQ,UAAR,CAAZ;AAAA,MACCC,UAAUD,QAAQ,IAAR,CADX;AAAA,MAC8B;AAC7BE,OAAOF,QAAQ,MAAR,CAFR;AAAA,MAGCG,aAAaH,QAAQ,cAAR,CAHd;AAAA,MAICI,KAAKJ,QAAQ,MAAR,CAJN;;AAOA,IAAIK,SAASD,GAAGE,SAAH,EAAb;;AAGA;AACAP,IAAIQ,MAAJ,CAAWC,QAAQC,GAAR,CAAYC,IAAZ,IAAoBP,WAAWQ,WAA1C;;AAEAZ,IAAIa,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC1BA,KAAIC,QAAJ,CAAa,mBAAb;AACA,CAFD;;AAIAhB,IAAIiB,GAAJ,CAAQ,GAAR,EAAa,CAACH,GAAD,EAAMC,GAAN,EAAWG,IAAX,KAAoB;AAChCH,KAAII,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACAJ,KAAII,MAAJ,CAAW,8BAAX,EAA2C,iCAA3C;AACAJ,KAAII,MAAJ,CAAW,8BAAX,EAA2C,cAA3C;AACAD;AACA,CALD;;AAOAlB,IAAIa,GAAJ,CAAQ,WAAR,EAAqB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAClCK,SAAQC,GAAR,CAAY,wBAAwBP,IAAIQ,UAAJ,CAAeC,aAAnD;AACAR,KAAIS,KAAJ,CAAU,uBAAV;AACA,CAHD;;AAKAxB,IAAIyB,IAAJ,CAAS,WAAT,EAAsB,CAACX,GAAD,EAAMC,GAAN,KAAc;AACnCK,SAAQC,GAAR,CAAYP,IAAIY,IAAhB;AACA,KAAIC,KAAKb,IAAIY,IAAJ,CAASE,OAAlB;AAAA,KACCC,YAAYf,IAAIY,IAAJ,CAASG,SADtB;;AAGA,KAAIC,QAAQC,OAAOC,IAAP,CAAaF,KAAD,IAAW;AAClC,SAAOA,MAAMG,cAAN,GAAuBN,EAA9B;AACA,EAFW,CAAZ;;AAIA,KAAIE,aAAaC,MAAMD,SAAvB,EAAkC;AACjCC,QAAMD,SAAN,GAAkBA,SAAlB;AACAT,UAAQC,GAAR,CAAY,sBAAZ;AACA,EAHD,MAIK;AACJD,UAAQC,GAAR,CAAY,gBAAZ;AACA;;AAEDN,KAAImB,IAAJ;AACA,CAlBD;;AAoBAlC,IAAIa,GAAJ,CAAQ,SAAR,EAAmB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAChCA,KAAIoB,IAAJ,CAASJ,MAAT;AACA,CAFD","file":"server.js","sourcesContent":["/* #### Configure EXPRESS #### */\nconst app = require('./../app'),\n\tarquivo = require('fs'),\t\t\t\t\t//módulo para manipular arquivos\n\tpath = require('path'),\n\tproperties = require('./properties'),\n\tdb = require('./db');\n\n\nlet totens = db.getTotems();\n\n\n/* Manage Server */\napp.listen(process.env.PORT || properties.SERVER_PORT);\n\napp.get('/', (req, res) => {\n\tres.sendfile('public/index.html');\n});\n\napp.all('*', (req, res, next) => {\n\tres.header('Access-Control-Allow-Origin', '*');\n\tres.header('Access-Control-Allow-Methods', 'PUT, GET, POST, DELETE, OPTIONS');\n\tres.header('Access-Control-Allow-Headers', 'Content-Type');\n\tnext();\n});\n\napp.get('/contatos', (req, res) => {\n\tconsole.log(\"\\nTotem Attemp: IP:\" + req.connection.remoteAddress);\n\tres.write(\"Conected to server...\");\n});\n\napp.post('/contatos', (req, res) => {\n\tconsole.log(req.body);\n\tlet id = req.body.totemID,\n\t\tsituation = req.body.situation;\n\n\tlet totem = totems.find((totem) => {\n\t\treturn totem.description_id = id;\n\t});\n\n\tif (situation != totem.situation) {\n\t\ttotem.situation = situation;\n\t\tconsole.log(\"Situações diferentes\");\n\t}\n\telse {\n\t\tconsole.log(\"Mesma Situação\");\n\t}\n\n\tres.send;\n});\n\napp.get('/totems', (req, res) => {\n\tres.json(totems);\n});"]}